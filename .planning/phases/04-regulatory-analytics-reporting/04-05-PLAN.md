---
phase: 04-regulatory-analytics-reporting
plan: 05
type: execute
wave: 3
depends_on: ["04-03", "04-04"]
files_modified:
  - frontend/src/pages/RegulatoryPage.tsx
  - frontend/src/pages/AuditTrailPage.tsx
  - frontend/src/pages/ModelGovernancePage.tsx
  - frontend/src/pages/ExportPage.tsx
  - frontend/src/api.ts
  - frontend/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "Regulatory page shows CECL allowance and Basel capital ratios"
    - "Audit trail page displays calculation provenance with search"
    - "Export page generates CSV/Excel downloads via backend API"
    - "All pages use React Query for data fetching with caching"
  artifacts:
    - path: "frontend/src/pages/RegulatoryPage.tsx"
      provides: "Regulatory dashboard with CECL and Basel metrics"
      min_lines: 200
    - path: "frontend/src/pages/AuditTrailPage.tsx"
      provides: "Audit trail query interface"
      min_lines: 150
    - path: "frontend/src/pages/ModelGovernancePage.tsx"
      provides: "Model version management interface"
      min_lines: 120
    - path: "frontend/src/pages/ExportPage.tsx"
      provides: "Export configuration and download interface"
      min_lines: 100
  key_links:
    - from: "RegulatoryPage.tsx"
      to: "/api/v1/regulatory/cecl/allowance"
      via: "useQuery hook"
      pattern: "useQuery.*regulatory.*cecl"
    - from: "ExportPage.tsx"
      to: "/api/v1/regulatory/reports/.*export"
      via: "download handler with responseType: blob"
      pattern: "responseType.*blob"
---

<objective>
Build Phase 4 frontend pages for regulatory analytics, audit trail, model governance, and export. Integrate with regulatory service from Plan 03 and export pipeline from Plan 04.

Purpose: Deliver RPT-01 (frontend pages for analytics domains) and RPT-03 (export UI). Enable user-facing regulatory reporting and compliance workflows.

Output: Four new React pages with routing, data fetching via React Query, and export download handlers.
</objective>

<execution_context>
@C:/Users/omack/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/omack/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-regulatory-analytics-reporting/04-RESEARCH.md
@.planning/phases/04-regulatory-analytics-reporting/04-03-PLAN.md
@.planning/phases/04-regulatory-analytics-reporting/04-04-PLAN.md

# Existing frontend patterns
@frontend/src/pages/RunResultsPage.tsx
@frontend/src/pages/RunCubePage.tsx
@frontend/src/api.ts
@frontend/src/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement Regulatory dashboard page</name>
  <files>
    frontend/src/pages/RegulatoryPage.tsx
    frontend/src/api.ts
  </files>
  <action>
Create `frontend/src/pages/RegulatoryPage.tsx` following research pattern (React Query + drill-down):

```tsx
import React, { useState } from 'react';
import { useQuery } from '@tanstack/react-query';
import { api } from '../api';

interface RegulatoryMetrics {
  total_allowance: number;
  by_segment: Record<string, number>;
  capital_ratios?: {
    cet1_ratio: number;
    tier1_ratio: number;
    total_capital_ratio: number;
  };
  total_rwa?: number;
  audit_id: string;
}

interface CECLRequest {
  portfolio_node_id: string;
  as_of_date: string;
  q_factor: number;
}

interface BaselRequest {
  portfolio_node_id: string;
  as_of_date: string;
  tier1_capital: number;
  tier2_capital: number;
}

export const RegulatoryPage: React.FC = () => {
  const [portfolioId, setPortfolioId] = useState('test-portfolio-1');
  const [asOfDate, setAsOfDate] = useState(new Date().toISOString().split('T')[0]);
  const [qFactor, setQFactor] = useState(0.0);
  const [tier1Capital, setTier1Capital] = useState(10000000);
  const [tier2Capital, setTier2Capital] = useState(5000000);

  // Fetch CECL allowance
  const {
    data: ceclData,
    isLoading: ceclLoading,
    refetch: refetchCecl,
  } = useQuery<RegulatoryMetrics>({
    queryKey: ['cecl', portfolioId, asOfDate, qFactor],
    queryFn: async () => {
      const response = await api.post('/regulatory/cecl/allowance', {
        portfolio_node_id: portfolioId,
        as_of_date: asOfDate,
        q_factor: qFactor,
      } as CECLRequest);
      return response.data;
    },
    enabled: false,  // Manual trigger
  });

  // Fetch Basel RWA
  const {
    data: baselData,
    isLoading: baselLoading,
    refetch: refetchBasel,
  } = useQuery<RegulatoryMetrics>({
    queryKey: ['basel', portfolioId, asOfDate, tier1Capital, tier2Capital],
    queryFn: async () => {
      const response = await api.post('/regulatory/basel/rwa', {
        portfolio_node_id: portfolioId,
        as_of_date: asOfDate,
        tier1_capital: tier1Capital,
        tier2_capital: tier2Capital,
      } as BaselRequest);
      return response.data;
    },
    enabled: false,  // Manual trigger
  });

  return (
    <div className="regulatory-page p-6">
      <h1 className="text-3xl font-bold mb-6">Regulatory Analytics</h1>

      {/* Configuration Form */}
      <div className="bg-white p-4 rounded shadow mb-6">
        <h2 className="text-xl font-semibold mb-4">Configuration</h2>
        <div className="grid grid-cols-2 gap-4">
          <div>
            <label className="block text-sm font-medium mb-1">Portfolio ID</label>
            <input
              type="text"
              value={portfolioId}
              onChange={(e) => setPortfolioId(e.target.value)}
              className="w-full border px-3 py-2 rounded"
            />
          </div>
          <div>
            <label className="block text-sm font-medium mb-1">As Of Date</label>
            <input
              type="date"
              value={asOfDate}
              onChange={(e) => setAsOfDate(e.target.value)}
              className="w-full border px-3 py-2 rounded"
            />
          </div>
          <div>
            <label className="block text-sm font-medium mb-1">Q-Factor (CECL)</label>
            <input
              type="number"
              value={qFactor}
              onChange={(e) => setQFactor(parseFloat(e.target.value))}
              step="0.01"
              min="0"
              max="0.5"
              className="w-full border px-3 py-2 rounded"
            />
          </div>
        </div>
        <div className="mt-4 flex gap-4">
          <button
            onClick={() => refetchCecl()}
            disabled={ceclLoading}
            className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
          >
            {ceclLoading ? 'Loading...' : 'Calculate CECL'}
          </button>
          <button
            onClick={() => refetchBasel()}
            disabled={baselLoading}
            className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
          >
            {baselLoading ? 'Loading...' : 'Calculate Basel RWA'}
          </button>
        </div>
      </div>

      {/* CECL Allowance Summary */}
      {ceclData && (
        <div className="bg-white p-4 rounded shadow mb-6">
          <h2 className="text-xl font-semibold mb-4">CECL Allowance</h2>
          <div className="grid grid-cols-3 gap-4 mb-4">
            <div className="p-4 bg-blue-50 rounded">
              <p className="text-sm text-gray-600">Total Allowance</p>
              <p className="text-2xl font-bold">
                ${ceclData.total_allowance.toLocaleString()}
              </p>
            </div>
            <div className="p-4 bg-gray-50 rounded">
              <p className="text-sm text-gray-600">Segments</p>
              <p className="text-2xl font-bold">
                {Object.keys(ceclData.by_segment).length}
              </p>
            </div>
            <div className="p-4 bg-gray-50 rounded">
              <p className="text-sm text-gray-600">Audit ID</p>
              <p className="text-sm font-mono">{ceclData.audit_id.substring(0, 16)}...</p>
            </div>
          </div>

          <h3 className="text-lg font-semibold mb-2">By Segment</h3>
          <table className="w-full border-collapse">
            <thead>
              <tr className="bg-gray-100">
                <th className="border p-2 text-left">Segment</th>
                <th className="border p-2 text-right">Allowance</th>
                <th className="border p-2 text-right">% of Total</th>
              </tr>
            </thead>
            <tbody>
              {Object.entries(ceclData.by_segment).map(([segment, allowance]) => (
                <tr key={segment}>
                  <td className="border p-2">{segment}</td>
                  <td className="border p-2 text-right">
                    ${allowance.toLocaleString()}
                  </td>
                  <td className="border p-2 text-right">
                    {((allowance / ceclData.total_allowance) * 100).toFixed(1)}%
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      )}

      {/* Basel RWA Summary */}
      {baselData && (
        <div className="bg-white p-4 rounded shadow">
          <h2 className="text-xl font-semibold mb-4">Basel III Capital Ratios</h2>
          <div className="grid grid-cols-4 gap-4 mb-4">
            <div className="p-4 bg-green-50 rounded">
              <p className="text-sm text-gray-600">Total RWA</p>
              <p className="text-2xl font-bold">
                ${baselData.total_rwa?.toLocaleString()}
              </p>
            </div>
            <div className="p-4 bg-blue-50 rounded">
              <p className="text-sm text-gray-600">CET1 Ratio</p>
              <p className="text-2xl font-bold">
                {((baselData.capital_ratios?.cet1_ratio || 0) * 100).toFixed(2)}%
              </p>
            </div>
            <div className="p-4 bg-blue-50 rounded">
              <p className="text-sm text-gray-600">Tier 1 Ratio</p>
              <p className="text-2xl font-bold">
                {((baselData.capital_ratios?.tier1_ratio || 0) * 100).toFixed(2)}%
              </p>
            </div>
            <div className="p-4 bg-blue-50 rounded">
              <p className="text-sm text-gray-600">Total Capital Ratio</p>
              <p className="text-2xl font-bold">
                {((baselData.capital_ratios?.total_capital_ratio || 0) * 100).toFixed(2)}%
              </p>
            </div>
          </div>

          <h3 className="text-lg font-semibold mb-2">RWA by Counterparty Type</h3>
          <table className="w-full border-collapse">
            <thead>
              <tr className="bg-gray-100">
                <th className="border p-2 text-left">Counterparty Type</th>
                <th className="border p-2 text-right">RWA</th>
              </tr>
            </thead>
            <tbody>
              {baselData.by_counterparty_type &&
                Object.entries(baselData.by_counterparty_type).map(([type, rwa]) => (
                  <tr key={type}>
                    <td className="border p-2">{type}</td>
                    <td className="border p-2 text-right">${rwa.toLocaleString()}</td>
                  </tr>
                ))}
            </tbody>
          </table>
        </div>
      )}
    </div>
  );
};
```

Update `frontend/src/api.ts` to include regulatory service base URL:

```tsx
// Add regulatory service proxy if not already present
const api = axios.create({
  baseURL: '/api/v1',  // Vite proxy handles routing to appropriate service
});
```

Vite config already proxies `/api/v1` paths, no changes needed if regulatory service routes follow `/api/v1/regulatory/*` pattern.
  </action>
  <verify>
```bash
# Verify component compiles
cd frontend && npx tsc --noEmit src/pages/RegulatoryPage.tsx
```
  </verify>
  <done>Regulatory dashboard page created with CECL and Basel calculation triggers, segment-level drill-down tables, integrated with regulatory service API</done>
</task>

<task type="auto">
  <name>Task 2: Implement Audit Trail, Model Governance, and Export pages</name>
  <files>
    frontend/src/pages/AuditTrailPage.tsx
    frontend/src/pages/ModelGovernancePage.tsx
    frontend/src/pages/ExportPage.tsx
  </files>
  <action>
**frontend/src/pages/AuditTrailPage.tsx** - Audit trail search and display:

```tsx
import React, { useState } from 'react';
import { useQuery } from '@tanstack/react-query';
import { api } from '../api';

interface AuditEntry {
  audit_id: string;
  audit_type: string;
  calculation_method: string;
  entity_id: string;
  computed_at: string;
  assumptions_json: Record<string, any>;
  results_json: Record<string, any>;
}

export const AuditTrailPage: React.FC = () => {
  const [entityId, setEntityId] = useState('');
  const [auditType, setAuditType] = useState('');
  const [selectedAuditId, setSelectedAuditId] = useState<string | null>(null);

  const { data: auditEntries, isLoading, refetch } = useQuery<AuditEntry[]>({
    queryKey: ['audit', 'search', entityId, auditType],
    queryFn: async () => {
      const params = new URLSearchParams();
      if (entityId) params.append('entity_id', entityId);
      if (auditType) params.append('audit_type', auditType);
      params.append('limit', '50');

      const response = await api.get(`/regulatory/audit/search?${params.toString()}`);
      return response.data;
    },
    enabled: false,
  });

  const { data: selectedEntry } = useQuery<AuditEntry>({
    queryKey: ['audit', selectedAuditId],
    queryFn: async () => {
      const response = await api.get(`/regulatory/audit/${selectedAuditId}`);
      return response.data;
    },
    enabled: !!selectedAuditId,
  });

  return (
    <div className="audit-trail-page p-6">
      <h1 className="text-3xl font-bold mb-6">Audit Trail</h1>

      {/* Search Form */}
      <div className="bg-white p-4 rounded shadow mb-6">
        <h2 className="text-xl font-semibold mb-4">Search</h2>
        <div className="grid grid-cols-3 gap-4">
          <div>
            <label className="block text-sm font-medium mb-1">Entity ID</label>
            <input
              type="text"
              value={entityId}
              onChange={(e) => setEntityId(e.target.value)}
              placeholder="portfolio-1, position-123, etc."
              className="w-full border px-3 py-2 rounded"
            />
          </div>
          <div>
            <label className="block text-sm font-medium mb-1">Audit Type</label>
            <select
              value={auditType}
              onChange={(e) => setAuditType(e.target.value)}
              className="w-full border px-3 py-2 rounded"
            >
              <option value="">All</option>
              <option value="CECL">CECL</option>
              <option value="BASEL">Basel III</option>
              <option value="GAAP">GAAP</option>
              <option value="IFRS">IFRS</option>
            </select>
          </div>
          <div className="flex items-end">
            <button
              onClick={() => refetch()}
              disabled={isLoading}
              className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
            >
              {isLoading ? 'Searching...' : 'Search'}
            </button>
          </div>
        </div>
      </div>

      {/* Results Table */}
      {auditEntries && auditEntries.length > 0 && (
        <div className="bg-white p-4 rounded shadow">
          <h2 className="text-xl font-semibold mb-4">Results ({auditEntries.length})</h2>
          <table className="w-full border-collapse">
            <thead>
              <tr className="bg-gray-100">
                <th className="border p-2 text-left">Audit ID</th>
                <th className="border p-2 text-left">Type</th>
                <th className="border p-2 text-left">Method</th>
                <th className="border p-2 text-left">Entity ID</th>
                <th className="border p-2 text-left">Computed At</th>
                <th className="border p-2"></th>
              </tr>
            </thead>
            <tbody>
              {auditEntries.map((entry) => (
                <tr key={entry.audit_id} className="hover:bg-gray-50">
                  <td className="border p-2 font-mono text-xs">
                    {entry.audit_id.substring(0, 12)}...
                  </td>
                  <td className="border p-2">{entry.audit_type}</td>
                  <td className="border p-2">{entry.calculation_method}</td>
                  <td className="border p-2">{entry.entity_id}</td>
                  <td className="border p-2">{new Date(entry.computed_at).toLocaleString()}</td>
                  <td className="border p-2">
                    <button
                      onClick={() => setSelectedAuditId(entry.audit_id)}
                      className="text-blue-600 hover:underline"
                    >
                      View
                    </button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      )}

      {/* Detail View */}
      {selectedEntry && (
        <div className="bg-white p-4 rounded shadow mt-6">
          <h2 className="text-xl font-semibold mb-4">Audit Entry Detail</h2>
          <div className="grid grid-cols-2 gap-4">
            <div>
              <p className="text-sm text-gray-600">Audit ID</p>
              <p className="font-mono">{selectedEntry.audit_id}</p>
            </div>
            <div>
              <p className="text-sm text-gray-600">Calculation Method</p>
              <p>{selectedEntry.calculation_method}</p>
            </div>
            <div className="col-span-2">
              <p className="text-sm text-gray-600 mb-2">Assumptions</p>
              <pre className="bg-gray-100 p-3 rounded overflow-auto text-xs">
                {JSON.stringify(selectedEntry.assumptions_json, null, 2)}
              </pre>
            </div>
            <div className="col-span-2">
              <p className="text-sm text-gray-600 mb-2">Results</p>
              <pre className="bg-gray-100 p-3 rounded overflow-auto text-xs">
                {JSON.stringify(selectedEntry.results_json, null, 2)}
              </pre>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};
```

**frontend/src/pages/ModelGovernancePage.tsx** - Model version management:

```tsx
import React from 'react';
import { useQuery } from '@tanstack/react-query';
import { api } from '../api';

interface ModelVersion {
  model_version: string;
  model_type: string;
  git_hash?: string;
  deployment_date: string;
  approval_status: string;
  backtesting_results_json?: Record<string, any>;
  notes?: string;
}

export const ModelGovernancePage: React.FC = () => {
  const { data: models, isLoading } = useQuery<ModelVersion[]>({
    queryKey: ['models'],
    queryFn: async () => {
      const response = await api.get('/regulatory/models/models');
      return response.data;
    },
  });

  return (
    <div className="model-governance-page p-6">
      <h1 className="text-3xl font-bold mb-6">Model Governance</h1>

      {isLoading && <p>Loading models...</p>}

      {models && models.length > 0 && (
        <div className="bg-white p-4 rounded shadow">
          <h2 className="text-xl font-semibold mb-4">Model Versions</h2>
          <table className="w-full border-collapse">
            <thead>
              <tr className="bg-gray-100">
                <th className="border p-2 text-left">Version</th>
                <th className="border p-2 text-left">Type</th>
                <th className="border p-2 text-left">Git Hash</th>
                <th className="border p-2 text-left">Deployment Date</th>
                <th className="border p-2 text-left">Status</th>
              </tr>
            </thead>
            <tbody>
              {models.map((model) => (
                <tr key={model.model_version} className="hover:bg-gray-50">
                  <td className="border p-2 font-mono">{model.model_version}</td>
                  <td className="border p-2">{model.model_type}</td>
                  <td className="border p-2 font-mono text-xs">
                    {model.git_hash?.substring(0, 10) || 'N/A'}
                  </td>
                  <td className="border p-2">
                    {new Date(model.deployment_date).toLocaleDateString()}
                  </td>
                  <td className="border p-2">
                    <span
                      className={`px-2 py-1 rounded text-xs ${
                        model.approval_status === 'APPROVED'
                          ? 'bg-green-100 text-green-800'
                          : model.approval_status === 'TESTING'
                          ? 'bg-yellow-100 text-yellow-800'
                          : 'bg-gray-100 text-gray-800'
                      }`}
                    >
                      {model.approval_status}
                    </span>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      )}
    </div>
  );
};
```

**frontend/src/pages/ExportPage.tsx** - Export download interface:

```tsx
import React, { useState } from 'react';
import { api } from '../api';

export const ExportPage: React.FC = () => {
  const [portfolioId, setPortfolioId] = useState('test-portfolio-1');
  const [format, setFormat] = useState<'csv' | 'xlsx'>('xlsx');
  const [includeAuditTrail, setIncludeAuditTrail] = useState(true);
  const [isExporting, setIsExporting] = useState(false);

  const handleExport = async () => {
    setIsExporting(true);
    try {
      const params = new URLSearchParams();
      params.append('format', format);
      params.append('include_audit_trail', includeAuditTrail.toString());

      const response = await api.get(
        `/regulatory/reports/regulatory/${portfolioId}/export?${params.toString()}`,
        {
          responseType: 'blob',
        }
      );

      // Trigger download
      const url = window.URL.createObjectURL(response.data);
      const a = document.createElement('a');
      a.href = url;
      a.download = `regulatory-${portfolioId}-${new Date().toISOString().split('T')[0]}.${format}`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      window.URL.revokeObjectURL(url);
    } catch (error) {
      console.error('Export failed:', error);
      alert('Export failed. Check console for details.');
    } finally {
      setIsExporting(false);
    }
  };

  return (
    <div className="export-page p-6">
      <h1 className="text-3xl font-bold mb-6">Export Regulatory Report</h1>

      <div className="bg-white p-4 rounded shadow max-w-lg">
        <h2 className="text-xl font-semibold mb-4">Configuration</h2>

        <div className="space-y-4">
          <div>
            <label className="block text-sm font-medium mb-1">Portfolio ID</label>
            <input
              type="text"
              value={portfolioId}
              onChange={(e) => setPortfolioId(e.target.value)}
              className="w-full border px-3 py-2 rounded"
            />
          </div>

          <div>
            <label className="block text-sm font-medium mb-1">Format</label>
            <select
              value={format}
              onChange={(e) => setFormat(e.target.value as 'csv' | 'xlsx')}
              className="w-full border px-3 py-2 rounded"
            >
              <option value="xlsx">Excel (.xlsx)</option>
              <option value="csv">CSV (.csv)</option>
            </select>
          </div>

          <div className="flex items-center">
            <input
              type="checkbox"
              checked={includeAuditTrail}
              onChange={(e) => setIncludeAuditTrail(e.target.checked)}
              className="mr-2"
            />
            <label className="text-sm">Include Audit Trail</label>
          </div>

          <button
            onClick={handleExport}
            disabled={isExporting}
            className="w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400"
          >
            {isExporting ? 'Exporting...' : 'Export'}
          </button>
        </div>
      </div>
    </div>
  );
};
```
  </action>
  <verify>
```bash
# Verify all components compile
cd frontend && npx tsc --noEmit src/pages/AuditTrailPage.tsx src/pages/ModelGovernancePage.tsx src/pages/ExportPage.tsx
```
  </verify>
  <done>Audit Trail, Model Governance, and Export pages created with search, display, and download functionality, integrated with regulatory service API</done>
</task>

<task type="auto">
  <name>Task 3: Update App routing and commit frontend changes</name>
  <files>
    frontend/src/App.tsx
    frontend/src/pages/*.tsx
  </files>
  <action>
Update `frontend/src/App.tsx` to include new routes:

```tsx
import { RegulatoryPage } from './pages/RegulatoryPage';
import { AuditTrailPage } from './pages/AuditTrailPage';
import { ModelGovernancePage } from './pages/ModelGovernancePage';
import { ExportPage } from './pages/ExportPage';

// Inside Routes component, add new routes:
<Route path="/regulatory" element={<RegulatoryPage />} />
<Route path="/audit-trail" element={<AuditTrailPage />} />
<Route path="/model-governance" element={<ModelGovernancePage />} />
<Route path="/export" element={<ExportPage />} />
```

Add navigation links in App.tsx header/sidebar (if navigation exists).

Commit all frontend changes:

```bash
node C:/Users/omack/.claude/get-shit-done/bin/gsd-tools.js commit \
  "feat(04-05): implement regulatory, audit trail, model governance, and export frontend pages" \
  --files frontend/src/pages/RegulatoryPage.tsx frontend/src/pages/AuditTrailPage.tsx frontend/src/pages/ModelGovernancePage.tsx frontend/src/pages/ExportPage.tsx frontend/src/App.tsx
```
  </action>
  <verify>
```bash
# Verify frontend builds
cd frontend && npm run build

# Verify commit
git log --oneline -1 | grep -q "04-05" && echo "Commit found" || echo "Commit missing"
```
  </verify>
  <done>Frontend routing updated with regulatory pages, all pages committed, frontend builds successfully</done>
</task>

</tasks>

<verification>
# Regulatory Page
- [ ] CECL calculation triggers and displays total allowance
- [ ] Segment-level breakdown table shows allocation
- [ ] Basel RWA calculation displays capital ratios
- [ ] Data fetched via React Query with useQuery hooks

# Audit Trail Page
- [ ] Search form filters by entity_id and audit_type
- [ ] Results table displays audit entries
- [ ] Detail view shows assumptions and results JSON
- [ ] Immutable audit entries displayed read-only

# Model Governance Page
- [ ] Model versions table displays all registered models
- [ ] Approval status shown with color-coded badges
- [ ] Git hash displayed for version traceability

# Export Page
- [ ] Portfolio ID and format selection working
- [ ] Export triggers download via blob responseType
- [ ] CSV and Excel downloads both working
- [ ] Audit trail inclusion toggle functional

# Routing & Navigation
- [ ] All new routes added to App.tsx
- [ ] Navigation links accessible (if navigation exists)
- [ ] Frontend builds without errors
</verification>

<success_criteria>
1. Regulatory dashboard shows CECL allowance and Basel capital ratios with drill-down
2. Audit trail page provides calculation provenance search and detail view
3. Model governance page displays version history with approval status
4. Export page generates CSV/Excel downloads via backend API
5. All pages use React Query for data fetching with proper error handling
6. Frontend builds successfully with new routes integrated
</success_criteria>

<output>
After completion, create `.planning/phases/04-regulatory-analytics-reporting/04-05-SUMMARY.md`
</output>
