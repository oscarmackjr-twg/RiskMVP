# Milestone v1.0: IPRS Portfolio Analytics Platform

**Status:** SHIPPED 2026-02-12
**Phases:** 1-4
**Total Plans:** 25
**Commits:** 106
**Lines Added:** ~46,753

## Overview

Expanded the Risk MVP from a working prototype into an institutional-grade portfolio analytics platform. 49 requirements delivered across 4 phases: foundation infrastructure, core compute engines, portfolio & data services, regulatory analytics & reporting.

## Phases

### Phase 1: Foundation & Infrastructure

**Goal**: Platform skeleton ready; compute engine refactored with registry pattern; database schema extended for full analytics pipeline
**Depends on**: None (first phase)
**Plans**: 5 plans

Plans:
- [x] 01-01: Shared library (Pydantic models, config, auth middleware)
- [x] 01-02: Pricer registry pattern (auto-bootstrap, function-based dispatch)
- [x] 01-03: Database schema extension (portfolio_node, position, cashflow, risk_metrics)
- [x] 01-04: Docker containerization (all services and workers)
- [x] 01-05: CI/CD pipelines (GitHub Actions, Terraform AWS infrastructure)

**Requirements:** PLAT-01 through PLAT-06 (6/6 delivered)
**Success Criteria:** 6/6 verified

### Phase 2: Core Compute Engines

**Goal**: Institutional-grade pricers, cashflow generation, risk analytics, and scenario execution
**Depends on**: Phase 1 (shared library, registry, database)
**Plans**: 9 plans

Plans:
- [x] 02-01: QuantLib curve construction (multi-curve bootstrap, interpolation)
- [x] 02-02: Callable and putable bond pricers (Hull-White tree-based)
- [x] 02-03: Floating-rate instrument pricer (multi-curve, cap/floor)
- [x] 02-04: ABS/MBS pricer (prepayment models, CPR/PSA)
- [x] 02-05: Structured product and derivatives pricers
- [x] 02-06: Cashflow generation (amortization, waterfall, schedule)
- [x] 02-07: Duration, DV01, convexity, key rate durations
- [x] 02-08: VaR, Expected Shortfall, credit risk, Monte Carlo
- [x] 02-09: Scenario management and stress testing

**Requirements:** PRICE-01 through PRICE-09, CF-01 through CF-06, RISK-01 through RISK-07, SCEN-01 through SCEN-04 (26/26 delivered)
**Success Criteria:** 8/8 verified

### Phase 3: Portfolio & Data Services

**Goal**: Portfolio hierarchy, position management, reference data; data ingestion pipelines
**Depends on**: Phase 1, Phase 2 (compute produces results for aggregation)
**Plans**: 5 plans

Plans:
- [x] 03-01: Database schema extension (portfolio hierarchy, positions, reference data)
- [x] 03-02: Portfolio and instrument master CRUD
- [x] 03-03: Reference data management and aggregation queries
- [x] 03-04: Data ingestion (market feeds, loan servicing, lineage)
- [x] 03-05: Portfolio snapshots and concentration monitoring

**Requirements:** PORT-01 through PORT-08, DATA-01 through DATA-04, RISK-06 (13/13 delivered)
**Success Criteria:** 6/6 verified

### Phase 4: Regulatory Analytics & Reporting

**Goal**: Regulatory frameworks (GAAP, IFRS, Basel, CECL), audit trails, model governance, and expanded frontend
**Depends on**: Phase 1, Phase 2, Phase 3 (regulatory aggregation needs all compute + portfolio data)
**Plans**: 6 plans in 3 waves

Plans:
- [x] 04-01: Database schema (audit_trail, regulatory_reference, model_governance, alerts, metrics)
- [x] 04-02: Regulatory compute modules (CECL, Basel, GAAP/IFRS calculations)
- [x] 04-03: Regulatory service (CECL/Basel/accounting/audit/model governance routes)
- [x] 04-04: Export pipeline (CSV/Excel with openpyxl)
- [x] 04-05: Frontend expansion (Regulatory, AuditTrail, ModelGovernance, Export pages)
- [x] 04-06: Alerting and threshold monitoring (backend + frontend)

**Requirements:** REG-01 through REG-05, RPT-01 through RPT-04 (9/9 delivered)
**Success Criteria:** 9/9 verified

---

## Milestone Summary

**Key Decisions:**

- Function-based pricer registry with auto-bootstrap on import (no base class required)
- QuantLib PiecewiseLogCubicDiscount for curve construction (industry standard)
- Multi-curve framework for floating-rate pricing (OIS discount + SOFR projection)
- Fixed Hull-White parameters (a=0.03, sigma=0.12) for callable/putable bonds
- Historical PD lookup table from Moody's data (not econometric models)
- PostgreSQL recursive CTEs for portfolio hierarchy traversal
- Content-addressable snapshots with SHA-256 deduplication
- Trigger-based immutability for audit trail (prevent_audit_modification)
- Multi-scenario CECL with probability weighting (ASC 326)
- Basel III standardized approach with tuple-based risk weight lookup

**Issues Resolved:**
- Schema alignment between plan templates and actual DB schema
- Subagent permission issues in Phase 4 (fallback to direct execution)
- Wave dependency ordering despite tool misreporting

**Issues Deferred:**
- Aurora write performance testing at 1M rows/run
- ABS/MBS prepayment model calibration against historical data
- Regulatory stress scenarios (CCAR/DFAST) requiring compliance team input
- Caching invalidation policy (TTL for intra-day runs)

**Technical Debt Incurred:**
- Pre-existing stubs (allowance.py, rwa.py, stress_capital.py) superseded but not removed
- Two stretch endpoints return 501 (hedge effectiveness, backtesting)
- No connection pooling (psycopg3 sync connection-per-request)
- Fixed volatility assumptions (20% flat for caps/floors)

---

_For current project status, see .planning/ROADMAP.md_
